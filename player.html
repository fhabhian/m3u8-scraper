<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Player HLS</title>
  <style>
    body { background:#000; margin:0; display:flex; align-items:center; justify-content:center; height:100vh; }
    video { width:100%; max-height:90vh; background:#000; }
  </style>
</head>
<body>
  <video id="player" controls autoplay></video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    async function loadStream() {
      const url = new URLSearchParams(window.location.search).get("url");
      if (!url) {
        alert("Falta ?url=");
        return;
      }

      const api = "https://TU-APP-NAME.onrender.com/scrape?url=" + encodeURIComponent(url);
      const res = await fetch(api).then(r => r.json());

      if (res.success && res.m3u8) {
        const video = document.getElementById("player");
        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(res.m3u8);
          hls.attachMedia(video);
        } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
          video.src = res.m3u8;
        }
      } else {
        alert("No se encontr√≥ m3u8");
      }
    }

    loadStream();
  </script>
</body>
</html>
